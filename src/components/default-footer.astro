---
import { Image } from "astro:assets";

import Link from "@/components/link.astro";
import { getTranslations } from "@/lib/i18n/get-translations";
import { createHref } from "@/lib/navigation/create-href";
import type { NavigationLink } from "@/lib/navigation/navigation";
import logo from "~/public/assets/images/logo-oeaw.png";

const { locale } = Astro.locals;
const t = await getTranslations(locale, "DefaultFooter");

const links = {
	home: {
		type: "link",
		href: createHref({ pathname: "/" }),
		label: t("navigation.items.home"),
	},
	imprint: {
		type: "link",
		href: createHref({ pathname: "/imprint" }),
		label: t("navigation.items.imprint"),
	},
} satisfies Record<string, NavigationLink | { type: "text"; label: string }>;
---

<footer class="border-t border-stroke-weak">
	<div class="container flex flex-col gap-y-6 px-4 py-12 sm:px-8">
		<div class="flex flex-col gap-y-8 xs:flex-row xs:items-center xs:justify-between">
			<Link class="-ml-2 inline-block shrink-0 rounded-xs p-2 focus-outline" href={links.home.href}>
				<Image alt="" class="h-14 w-auto shrink-0" src={logo} />
				<span class="sr-only">{links.home.label}</span>
			</Link>
		</div>

		<div class="flex flex-col gap-y-8">
			<nav aria-label={t("navigation.label")}>
				<ul
					class="-mx-2 flex flex-wrap items-center gap-x-2 gap-y-3 text-sm text-text-weak"
					role="list"
				>
					{
						Object.entries(links).map(([id, link]) => {
							if (id === "home") {
								return null;
							}

							return (
								<li>
									<Link
										class="rounded-xs p-2 underline decoration-dotted underline-offset-4 transition hover:decoration-solid focus-visible:text-text-strong focus-visible:outline-offset-4"
										href={link.href}
									>
										{link.label}
									</Link>
								</li>
							);
						})
					}
				</ul>
			</nav>

			<small class="text-xs text-text-weak">
				&copy; {new Date().getUTCFullYear()}{" "}
				<a
					class="rounded-xs p-2 underline decoration-dotted underline-offset-4 transition hover:decoration-solid focus-visible:text-text-strong focus-visible:outline-offset-4"
					href={"https://www.oeaw.ac.at/"}
				>
					www.oeaw.ac.at
				</a>
			</small>
		</div>
	</div>
</footer>
